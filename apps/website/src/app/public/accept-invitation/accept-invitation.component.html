<div class="container">
  <div class="form-card">
    <div class="card-header">
      <img src="/assets/img/logo.png" alt="QuickProLaw Logo" class="logo" />
      <h2>Join Your Firm on QuickProLaw</h2>
    </div>

    <!-- Success Message -->
    <div *ngIf="successMessage()" class="message success">
      <p>{{ successMessage() }}</p>
      <p>Download the app from your app store to get started.</p>
    </div>

    <!-- Error Message -->
    <div *ngIf="errorMessage() && !successMessage()" class="message error">
      <p>{{ errorMessage() }}</p>
    </div>

    <!-- Loading/Form -->
    <div *ngIf="!successMessage()">
      <div *ngIf="invitationDetails(); else loadingOrError">
        <p class="subtitle">
          You've been invited to join as a
          <strong>{{ invitationDetails()?.designation }}</strong>.
          Complete your profile for <strong>{{ invitationDetails()?.email }}</strong>.
        </p>

        <form [formGroup]="acceptForm" (ngSubmit)="onSubmit()">
          <div class="form-group">
            <label for="firstName">First Name</label>
            <input id="firstName" type="text" formControlName="firstName" required />
          </div>          
          <div class="form-group">
            <label for="otherNames">Other Name</label>
            <input id="otherNames" type="text" formControlName="otherNames" required />
          </div>
          <div class="form-group">
            <label for="lastName">Last Name</label>
            <input id="lastName" type="text" formControlName="lastName" required />
          </div>
          <div class="form-group">
            <label for="password">Password</label>
            <input id="password" type="password" formControlName="password" required />
          </div>
          <div class="form-group">
            <label for="confirmPassword">Confirm Password</label>
            <input id="confirmPassword" type="password" formControlName="confirmPassword" required />
            <div *ngIf="acceptForm.errors?.['passwordMismatch'] && acceptForm.get('confirmPassword')?.touched" class="field-error">
              Passwords do not match.
            </div>
          </div>

          <button type="submit" class="submit-btn" [disabled]="acceptForm.invalid || isSubmitting()">
            {{ isSubmitting() ? 'Submitting...' : 'Complete Registration' }}
          </button>
        </form>
      </div>

      <ng-template #loadingOrError>
        <p *ngIf="!errorMessage()">Verifying invitation...</p>
      </ng-template>
    </div>
  </div>
</div>
